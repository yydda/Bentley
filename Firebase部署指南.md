# Firebase éƒ¨ç½²æŒ‡å—

## ğŸ“‹ å‰ç½®å‡†å¤‡

1. **Googleè´¦å·**ï¼šéœ€è¦ä¸€ä¸ªGoogleè´¦å·ç”¨äºç™»å½•Firebase
2. **Firebaseé¡¹ç›®**ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Firebaseé¡¹ç›®

---

## ğŸš€ ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºFirebaseé¡¹ç›®

### 1.1 è®¿é—®Firebaseæ§åˆ¶å°
1. æ‰“å¼€ [Firebase Console](https://console.firebase.google.com/)
2. ç‚¹å‡»"æ·»åŠ é¡¹ç›®"æˆ–"åˆ›å»ºé¡¹ç›®"

### 1.2 åˆ›å»ºé¡¹ç›®
1. **é¡¹ç›®åç§°**ï¼šè¾“å…¥é¡¹ç›®åç§°ï¼ˆå¦‚ï¼š`my-diary-app`ï¼‰
2. **Google Analytics**ï¼šå¯ä»¥é€‰æ‹©å¯ç”¨æˆ–ç¦ç”¨ï¼ˆå…è´¹ç‰ˆä¸éœ€è¦ï¼‰
3. ç‚¹å‡»"åˆ›å»ºé¡¹ç›®"
4. ç­‰å¾…é¡¹ç›®åˆ›å»ºå®Œæˆï¼ˆçº¦30ç§’ï¼‰

---

## ğŸ”§ ç¬¬äºŒæ­¥ï¼šé…ç½®Firebase Webåº”ç”¨

### 2.1 æ·»åŠ Webåº”ç”¨
1. åœ¨Firebaseæ§åˆ¶å°ä¸­ï¼Œç‚¹å‡»é¡¹ç›®è®¾ç½®å›¾æ ‡ï¼ˆâš™ï¸ï¼‰
2. å‘ä¸‹æ»šåŠ¨åˆ°"ä½ çš„åº”ç”¨"éƒ¨åˆ†
3. ç‚¹å‡»"</>"ï¼ˆWebåº”ç”¨å›¾æ ‡ï¼‰
4. **åº”ç”¨æ˜µç§°**ï¼šè¾“å…¥åº”ç”¨åç§°ï¼ˆå¦‚ï¼š`Diary App`ï¼‰
5. **å‹¾é€‰**ï¼šFirebase Hostingï¼ˆå¯é€‰ï¼Œæˆ‘ä»¬ä½¿ç”¨GitHub Pagesï¼‰
6. ç‚¹å‡»"æ³¨å†Œåº”ç”¨"

### 2.2 è·å–é…ç½®ä¿¡æ¯
1. å¤åˆ¶æ˜¾ç¤ºçš„é…ç½®å¯¹è±¡ï¼Œç±»ä¼¼ï¼š
```javascript
const firebaseConfig = {
  apiKey: "AIzaSy...",
  authDomain: "your-project.firebaseapp.com",
  projectId: "your-project-id",
  storageBucket: "your-project.appspot.com",
  messagingSenderId: "123456789",
  appId: "1:123456789:web:abcdef"
}
```

### 2.3 æ›´æ–°é¡¹ç›®é…ç½®
1. æ‰“å¼€ `src/config/firebase.js`
2. å°† `YOUR_API_KEY` ç­‰å ä½ç¬¦æ›¿æ¢ä¸ºå®é™…çš„é…ç½®å€¼

```javascript
const firebaseConfig = {
  apiKey: "AIzaSy...",  // æ›¿æ¢è¿™é‡Œ
  authDomain: "your-project.firebaseapp.com",  // æ›¿æ¢è¿™é‡Œ
  projectId: "your-project-id",  // æ›¿æ¢è¿™é‡Œ
  storageBucket: "your-project.appspot.com",  // æ›¿æ¢è¿™é‡Œ
  messagingSenderId: "123456789",  // æ›¿æ¢è¿™é‡Œ
  appId: "1:123456789:web:abcdef"  // æ›¿æ¢è¿™é‡Œ
}
```

---

## ğŸ” ç¬¬ä¸‰æ­¥ï¼šå¯ç”¨Googleè®¤è¯

### 3.1 å¯ç”¨Googleç™»å½•
1. åœ¨Firebaseæ§åˆ¶å°ï¼Œç‚¹å‡»å·¦ä¾§èœå•çš„"Authentication"
2. ç‚¹å‡»"å¼€å§‹ä½¿ç”¨"
3. ç‚¹å‡»"Sign-in method"æ ‡ç­¾
4. æ‰¾åˆ°"Google"ï¼Œç‚¹å‡»å¯ç”¨
5. **é¡¹ç›®æ”¯æŒé‚®ç®±**ï¼šé€‰æ‹©ä½ çš„Googleè´¦å·é‚®ç®±
6. **é¡¹ç›®åç§°**ï¼šè¾“å…¥é¡¹ç›®åç§°ï¼ˆä¼šè‡ªåŠ¨å¡«å……ï¼‰
7. ç‚¹å‡»"ä¿å­˜"

### 3.2 é…ç½®æˆæƒåŸŸåï¼ˆé‡è¦ï¼‰

**æ–¹æ³•ä¸€ï¼šé€šè¿‡Authenticationè®¾ç½®**
1. åœ¨Firebaseæ§åˆ¶å°ï¼Œç‚¹å‡»å·¦ä¾§èœå•çš„ **"Authentication"**
2. åœ¨é¡µé¢é¡¶éƒ¨ï¼Œç‚¹å‡» **"Settings"ï¼ˆè®¾ç½®ï¼‰** æ ‡ç­¾ï¼ˆåœ¨"Sign-in method"æ ‡ç­¾æ—è¾¹ï¼‰
3. å‘ä¸‹æ»šåŠ¨æ‰¾åˆ° **"Authorized domains"ï¼ˆæˆæƒåŸŸåï¼‰** éƒ¨åˆ†
4. ç‚¹å‡» **"Add domain"ï¼ˆæ·»åŠ åŸŸåï¼‰** æŒ‰é’®
5. è¾“å…¥ä½ çš„GitHub PagesåŸŸåï¼ˆ**ä¸éœ€è¦** `https://` å‰ç¼€ï¼‰ï¼Œä¾‹å¦‚ï¼š
   - `yourusername.github.io`
6. ç‚¹å‡»"Add"ä¿å­˜

**æ–¹æ³•äºŒï¼šé€šè¿‡é¡¹ç›®è®¾ç½®**
1. åœ¨Firebaseæ§åˆ¶å°ï¼Œç‚¹å‡»å·¦ä¸Šè§’çš„ **è®¾ç½®å›¾æ ‡ï¼ˆâš™ï¸ï¼‰**
2. é€‰æ‹© **"Project settings"ï¼ˆé¡¹ç›®è®¾ç½®ï¼‰**
3. å‘ä¸‹æ»šåŠ¨æ‰¾åˆ° **"Authorized domains"ï¼ˆæˆæƒåŸŸåï¼‰** éƒ¨åˆ†
4. ç‚¹å‡» **"Add domain"** æ·»åŠ ä½ çš„GitHub PagesåŸŸå

**é‡è¦æç¤º**ï¼š
- é»˜è®¤å·²ç»åŒ…å« `localhost`ã€`your-project.firebaseapp.com` å’Œ `your-project.web.app`
- åªéœ€è¦æ·»åŠ ä½ çš„GitHub Pagesæ ¹åŸŸåå³å¯ï¼ˆä¾‹å¦‚ï¼š`yourusername.github.io`ï¼‰
- **ä¸éœ€è¦**åŒ…å«è·¯å¾„ï¼Œä¾‹å¦‚ä¸è¦æ·»åŠ  `yourusername.github.io/repo-name`
- å¦‚æœæ‰¾ä¸åˆ°è¿™äº›é€‰é¡¹ï¼Œå¯ä»¥å°è¯•ç›´æ¥è®¿é—®ï¼š`https://console.firebase.google.com/project/bentley-c62d5/authentication/settings`

**è¯¦ç»†è¯´æ˜**ï¼šå¦‚æœè¿˜æ˜¯æ‰¾ä¸åˆ°ï¼Œè¯·æŸ¥çœ‹ `FirebaseæˆæƒåŸŸåé…ç½®è¯´æ˜.md` æ–‡ä»¶ï¼Œé‡Œé¢æœ‰æ›´è¯¦ç»†çš„æ­¥éª¤å’Œæˆªå›¾è¯´æ˜ã€‚

---

## ğŸ—„ï¸ ç¬¬å››æ­¥ï¼šé…ç½®Firestoreæ•°æ®åº“

### 4.1 åˆ›å»ºFirestoreæ•°æ®åº“

**å¦‚æœå·¦ä¾§èœå•ä¸­æ²¡æœ‰"Firestore Database"ï¼š**

1. åœ¨Firebaseæ§åˆ¶å°ï¼Œç‚¹å‡»å·¦ä¾§èœå•çš„ **"Build"ï¼ˆæ„å»ºï¼‰** æˆ– **"æ„å»º"** é€‰é¡¹
2. åœ¨å±•å¼€çš„èœå•ä¸­ï¼Œæ‰¾åˆ°å¹¶ç‚¹å‡» **"Firestore Database"** æˆ– **"Firestore æ•°æ®åº“"**
3. å¦‚æœè¿˜æ˜¯æ²¡æœ‰ï¼Œå°è¯•ç‚¹å‡»å·¦ä¾§èœå•çš„ **"æ›´å¤š"** æˆ– **"More"** é€‰é¡¹

**å¦‚æœä»ç„¶æ‰¾ä¸åˆ°ï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤åˆ›å»ºï¼š**

1. åœ¨Firebaseæ§åˆ¶å°é¦–é¡µï¼Œæ‰¾åˆ° **"Firestore Database"** å¡ç‰‡
2. ç‚¹å‡» **"åˆ›å»ºæ•°æ®åº“"** æˆ– **"Create database"** æŒ‰é’®
3. å¦‚æœé¦–é¡µä¹Ÿæ²¡æœ‰ï¼Œå°è¯•ç›´æ¥è®¿é—®ï¼š
   ```
   https://console.firebase.google.com/project/bentley-c62d5/firestore
   ```

**åˆ›å»ºæ•°æ®åº“æ­¥éª¤ï¼š**

1. ç‚¹å‡» **"åˆ›å»ºæ•°æ®åº“"** æˆ– **"Create database"**
2. **å®‰å…¨è§„åˆ™**ï¼šé€‰æ‹© **"ä»¥æµ‹è¯•æ¨¡å¼å¯åŠ¨"** æˆ– **"Start in test mode"**ï¼ˆå¼€å‘é˜¶æ®µï¼‰
   - âš ï¸ **æ³¨æ„**ï¼šæµ‹è¯•æ¨¡å¼å…è®¸æ‰€æœ‰è¯»å†™ï¼Œç¨åéœ€è¦é…ç½®å®‰å…¨è§„åˆ™
3. **ä½ç½®**ï¼šé€‰æ‹©ç¦»ä½ æœ€è¿‘çš„åŒºåŸŸ
   - æ¨èé€‰æ‹©ï¼š`asia-east1`ï¼ˆå°æ¹¾ï¼‰æˆ– `asia-southeast1`ï¼ˆæ–°åŠ å¡ï¼‰
   - å¦‚æœåœ¨ä¸­å›½å¤§é™†ï¼Œå¯ä»¥é€‰æ‹©ï¼š`asia-east1`
4. ç‚¹å‡» **"å¯ç”¨"** æˆ– **"Enable"**
5. ç­‰å¾…æ•°æ®åº“åˆ›å»ºå®Œæˆï¼ˆçº¦30-60ç§’ï¼‰

rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if
          request.time < timestamp.date(2026, 1, 29);
    }
  }
}

**å¦‚æœå·²ç»åˆ›å»ºè¿‡æ•°æ®åº“ï¼š**
- ç›´æ¥ç‚¹å‡»å·¦ä¾§èœå•çš„ **"Firestore Database"** å³å¯è¿›å…¥
- æˆ–è€…è®¿é—®ä¸Šé¢çš„ç›´æ¥é“¾æ¥

### 4.2 é…ç½®å®‰å…¨è§„åˆ™ï¼ˆé‡è¦ï¼‰
1. åœ¨Firestore Databaseé¡µé¢ï¼Œç‚¹å‡»"è§„åˆ™"æ ‡ç­¾
2. æ›¿æ¢ä¸ºä»¥ä¸‹è§„åˆ™ï¼š

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // æ—¥è®°æ•°æ®ï¼šåªæœ‰ç™»å½•ç”¨æˆ·æ‰èƒ½è¯»å†™è‡ªå·±çš„æ•°æ®
    match /diaries/{userId}/dates/{date} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
  }
}
```

3. ç‚¹å‡»"å‘å¸ƒ"

**è§„åˆ™è¯´æ˜**ï¼š
- åªæœ‰ç™»å½•ç”¨æˆ·æ‰èƒ½è®¿é—®
- ç”¨æˆ·åªèƒ½è¯»å†™è‡ªå·±çš„æ•°æ®ï¼ˆé€šè¿‡ `userId` åŒ¹é…ï¼‰
- ç¡®ä¿æ•°æ®å®‰å…¨éš”ç¦»

---

## ğŸ“¦ ç¬¬äº”æ­¥ï¼šå®‰è£…ä¾èµ–

åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œï¼š

```bash
npm install
```

è¿™ä¼šå®‰è£…Firebase SDKï¼ˆå·²åœ¨ `package.json` ä¸­æ·»åŠ ï¼‰

---

## ğŸ§ª ç¬¬å…­æ­¥ï¼šæœ¬åœ°æµ‹è¯•

### 6.1 å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```

### 6.2 æµ‹è¯•åŠŸèƒ½
1. æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:5173`
2. ç‚¹å‡»"ç™»å½•"æŒ‰é’®
3. ä½¿ç”¨Googleè´¦å·ç™»å½•
4. å¡«å†™æ—¥è®°æ•°æ®
5. æ£€æŸ¥æ•°æ®æ˜¯å¦ä¿å­˜åˆ°Firebase

### 6.3 æ£€æŸ¥Firebaseæ§åˆ¶å°
1. æ‰“å¼€Firestore Database
2. åº”è¯¥èƒ½çœ‹åˆ° `diaries` é›†åˆ
3. å±•å¼€åèƒ½çœ‹åˆ°ä½ çš„ç”¨æˆ·IDå’Œæ—¥æœŸæ•°æ®

---

## ğŸš€ ç¬¬ä¸ƒæ­¥ï¼šéƒ¨ç½²åˆ°GitHub Pages

### 7.1 æ„å»ºé¡¹ç›®
```bash
npm run build
```

### 7.2 æäº¤ä»£ç 
```bash
git add .
git commit -m "æ·»åŠ Firebaseæ”¯æŒ"
git push
```

### 7.3 é…ç½®GitHub Pages
1. åœ¨GitHubä»“åº“è®¾ç½®ä¸­ï¼Œå¯ç”¨GitHub Pages
2. é€‰æ‹© `gh-pages` åˆ†æ”¯æˆ– `main` åˆ†æ”¯çš„ `docs` æ–‡ä»¶å¤¹
3. ç­‰å¾…éƒ¨ç½²å®Œæˆ

### 7.4 æ›´æ–°æˆæƒåŸŸå
1. åœ¨Firebaseæ§åˆ¶å°çš„Authenticationè®¾ç½®ä¸­
2. æ·»åŠ ä½ çš„GitHub PagesåŸŸååˆ°æˆæƒåŸŸååˆ—è¡¨

---

## ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹

### âš ï¸ API Keyå®‰å…¨
- Firebaseçš„API Keyæ˜¯**å…¬å¼€çš„**ï¼Œè¿™æ˜¯æ­£å¸¸çš„è®¾è®¡
- å®‰å…¨æ€§é€šè¿‡**Firestoreå®‰å…¨è§„åˆ™**ä¿è¯
- ä¸è¦æ‹…å¿ƒAPI Keyæ³„éœ²ï¼Œåªè¦å®‰å…¨è§„åˆ™é…ç½®æ­£ç¡®å³å¯

### âœ… å®‰å…¨æœ€ä½³å®è·µ
1. âœ… ä½¿ç”¨Firestoreå®‰å…¨è§„åˆ™é™åˆ¶è®¿é—®
2. âœ… ç¡®ä¿ç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„æ•°æ®
3. âœ… å®šæœŸæ£€æŸ¥Firebaseæ§åˆ¶å°çš„ä½¿ç”¨æƒ…å†µ
4. âœ… ç›‘æ§å¼‚å¸¸è®¿é—®

---

## ğŸ“Š å…è´¹é¢åº¦è¯´æ˜

Firebaseå…è´¹ç‰ˆï¼ˆSparkè®¡åˆ’ï¼‰åŒ…å«ï¼š

| æœåŠ¡ | å…è´¹é¢åº¦ |
|------|---------|
| Firestoreè¯»å– | 50,000æ¬¡/å¤© |
| Firestoreå†™å…¥ | 20,000æ¬¡/å¤© |
| Firestoreåˆ é™¤ | 20,000æ¬¡/å¤© |
| å­˜å‚¨ç©ºé—´ | 1GB |
| å¸¦å®½ | 10GB/æœˆ |
| Authentication | æ— é™åˆ¶ |

**ä¸ªäººä½¿ç”¨å®Œå…¨è¶³å¤Ÿï¼**

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: ç™»å½•åæç¤º"æƒé™ä¸è¶³"
**A:** æ£€æŸ¥Firestoreå®‰å…¨è§„åˆ™æ˜¯å¦æ­£ç¡®é…ç½®ï¼Œç¡®ä¿ç”¨æˆ·IDåŒ¹é…

### Q2: æ•°æ®æ²¡æœ‰åŒæ­¥
**A:** 
1. æ£€æŸ¥æ˜¯å¦å·²ç™»å½•
2. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
3. æ£€æŸ¥Firebaseæ§åˆ¶å°çš„ç½‘ç»œè¯·æ±‚

### Q3: æœ¬åœ°æ•°æ®å¦‚ä½•è¿ç§»åˆ°Firebaseï¼Ÿ
**A:** 
1. ç™»å½•åï¼Œåœ¨ç™»å½•å¯¹è¯æ¡†ä¸­ä¼šæ˜¾ç¤º"æ£€æµ‹åˆ°æœ¬åœ°æ•°æ®"
2. ç‚¹å‡»"ç«‹å³è¿ç§»"æŒ‰é’®
3. æ•°æ®ä¼šè‡ªåŠ¨è¿ç§»åˆ°Firebase

### Q4: å¯ä»¥åŒæ—¶ä½¿ç”¨æœ¬åœ°å­˜å‚¨å’ŒFirebaseå—ï¼Ÿ
**A:** å¯ä»¥ï¼ç³»ç»Ÿæ”¯æŒä¸¤ç§æ¨¡å¼ï¼š
- **äº‘ç«¯åŒæ­¥æ¨¡å¼**ï¼šæ•°æ®å­˜å‚¨åœ¨Firebaseï¼Œå¤šè®¾å¤‡åŒæ­¥
- **æœ¬åœ°å­˜å‚¨æ¨¡å¼**ï¼šæ•°æ®å­˜å‚¨åœ¨æµè§ˆå™¨ï¼Œä¸åŒæ­¥

å¯ä»¥åœ¨ç™»å½•å¯¹è¯æ¡†ä¸­åˆ‡æ¢æ¨¡å¼ã€‚

---

## ğŸ“ ä¸‹ä¸€æ­¥

1. âœ… å®ŒæˆFirebaseé…ç½®
2. âœ… æµ‹è¯•ç™»å½•å’Œæ•°æ®åŒæ­¥
3. âœ… éƒ¨ç½²åˆ°GitHub Pages
4. âœ… åœ¨ä¸åŒè®¾å¤‡ä¸Šæµ‹è¯•åŒæ­¥åŠŸèƒ½

---

## ğŸ†˜ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æ£€æŸ¥Firebaseæ§åˆ¶å°çš„é”™è¯¯æ—¥å¿—
2. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯
3. æŸ¥çœ‹Firebaseå®˜æ–¹æ–‡æ¡£

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰

